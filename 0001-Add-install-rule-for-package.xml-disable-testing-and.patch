From dc19d7873d9a0d3b9a28831ca72631bb037c7bda Mon Sep 17 00:00:00 2001
From: Fabien Spindler <Fabien.Spindler@inria.fr>
Date: Sat, 19 Dec 2015 09:23:39 +0100
Subject: [PATCH] Add install rule for package.xml, disable testing and force
 CMAKE_INSTALL_LIBDIR=lib

---
 CMakeLists.txt | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index c53d54a..e001ade 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -61,6 +61,7 @@ set(VISP_REVISION "1")
 
 find_file(GNU_INSTALL_DIRS_FROM_CMAKE NAMES GNUInstallDirs.cmake PATHS ${CMAKE_ROOT}/Modules)
 mark_as_advanced(GNU_INSTALL_DIRS_FROM_CMAKE)
+set(CMAKE_INSTALL_LIBDIR lib)
 if(GNU_INSTALL_DIRS_FROM_CMAKE)
   include(${CMAKE_ROOT}/Modules/GNUInstallDirs.cmake)
 else()
@@ -250,11 +251,14 @@ VP_OPTION(USE_DMTX        DMTX         ""    "Include dmtx support"         "" O
 # Dashboards are sent to http://cdash.irisa.fr/CDash/index.php?project=ViSP
 #----------------------------------------------------------------------
 if(BUILD_TESTS)
-  enable_testing()
+#  enable_testing()
   mark_as_advanced(DART_ROOT)
   mark_as_advanced(BUILD_TESTING)
 endif()
 
+# Install catkin package.xml
+install(FILES package.xml DESTINATION share/visp)
+
 #----------------------------------------------------------------------
 # Try to find doxygen for documentation generation
 # Use "make visp_doc" target to generate the documentation
-- 
1.9.1

